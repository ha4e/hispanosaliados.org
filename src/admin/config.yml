# Decap CMS config for HA4E. Editors use /admin on the live site.
# Auth: GitHub backend via our OAuth proxy (netlify/functions/cms-auth, cms-callback).
# Set base_url so Decap opens our /auth instead of api.netlify.com (which doesn't postMessage correctly).
backend:
  name: github
  repo: ha4e/hispanosaliados.org
  branch: main
  base_url: https://www.hispanosaliados.org
  auth_endpoint: auth

media_folder: "src/assets/images"
public_folder: "/assets/images"

locale: "en"

collections:
  - name: "spotlights-en"
    label: "Volunteer Spotlight (English)"
    files:
      - label: "Spotlights"
        name: "spotlights"
        file: "src/content/en/spotlights.json"
        format: "json"
        fields:
          - label: "Current spotlight"
            name: "current"
            widget: "object"
            collapsed: false
            fields:
              - { label: "Name", name: "name", widget: "string" }
              - { label: "Role", name: "role", widget: "string" }
              - { label: "URL (e.g. LinkedIn)", name: "url", widget: "string", required: false }
              - { label: "Image path", name: "image", widget: "string", hint: "e.g. /assets/images/spotlights/january-2026.jpg" }
              - { label: "Month", name: "month", widget: "string", hint: "e.g. January" }
              - { label: "Year", name: "year", widget: "number" }
              - { label: "Blurb (markdown ok)", name: "blurb", widget: "markdown" }
          - label: "Previous spotlights"
            name: "previous"
            widget: "list"
            summary: "{{fields.name}} ({{fields.month}} {{fields.year}})"
            fields:
              - { label: "Name", name: "name", widget: "string" }
              - { label: "Role", name: "role", widget: "string" }
              - { label: "URL", name: "url", widget: "string", required: false }
              - { label: "Image path", name: "image", widget: "string", required: false }
              - { label: "Month", name: "month", widget: "string" }
              - { label: "Year", name: "year", widget: "number" }
              - { label: "Blurb", name: "blurb", widget: "markdown", required: false }

  - name: "spotlights-es"
    label: "Volunteer Spotlight (Spanish)"
    files:
      - label: "Spotlights"
        name: "spotlights"
        file: "src/content/es/spotlights.json"
        format: "json"
        fields:
          - label: "Spotlight actual"
            name: "current"
            widget: "object"
            collapsed: false
            fields:
              - { label: "Nombre", name: "name", widget: "string" }
              - { label: "Rol", name: "role", widget: "string" }
              - { label: "URL (ej. LinkedIn)", name: "url", widget: "string", required: false }
              - { label: "Ruta de imagen", name: "image", widget: "string", hint: "ej. /assets/images/spotlights/january-2026.jpg" }
              - { label: "Mes", name: "month", widget: "string", hint: "ej. Enero" }
              - { label: "Año", name: "year", widget: "number" }
              - { label: "Descripción (markdown ok)", name: "blurb", widget: "markdown" }
          - label: "Spotlights anteriores"
            name: "previous"
            widget: "list"
            summary: "{{fields.name}} ({{fields.month}} {{fields.year}})"
            fields:
              - { label: "Nombre", name: "name", widget: "string" }
              - { label: "Rol", name: "role", widget: "string" }
              - { label: "URL", name: "url", widget: "string", required: false }
              - { label: "Ruta de imagen", name: "image", widget: "string", required: false }
              - { label: "Mes", name: "month", widget: "string" }
              - { label: "Año", name: "year", widget: "number" }
              - { label: "Descripción", name: "blurb", widget: "markdown", required: false }

  - name: "pages-en"
    label: "Pages (English)"
    folder: "src/content/en"
    extension: "md"
    format: "frontmatter"
    create: true
    slug: "{{slug}}"
    summary: "{{slug}}"
    fields:
      - { label: "Title", name: "title", widget: "string", required: false, hint: "Optional; used for new pages. List view shows filename (e.g. about, contact) when empty." }
      - { label: "Body", name: "body", widget: "markdown" }

  - name: "pages-es"
    label: "Pages (Spanish)"
    folder: "src/content/es"
    extension: "md"
    format: "frontmatter"
    create: true
    slug: "{{slug}}"
    summary: "{{slug}}"
    fields:
      - { label: "Título", name: "title", widget: "string", required: false, hint: "Opcional; para páginas nuevas. La lista muestra el nombre del archivo (ej. about, contact) si está vacío." }
      - { label: "Cuerpo", name: "body", widget: "markdown" }
