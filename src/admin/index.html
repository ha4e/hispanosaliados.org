<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="HA4E content editor â€“ sign in to edit site content.">
  <title>HA4E Content Editor</title>
  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link href="/admin/config.yml" type="text/yaml" rel="cms-config-url">
  <script>
    (function() {
      function dispatchAuth(msg) {
        if (!msg) return;
        window.dispatchEvent(new MessageEvent('message', { data: msg, origin: window.location.origin }));
      }
      function tryApplyPending() {
        try {
          var msg = localStorage.getItem('cms-oauth-pending');
          if (msg) {
            dispatchAuth(msg);
            return true;
          }
        } catch (e) {}
        return false;
      }
      function applyPendingAndClear() {
        if (tryApplyPending()) {
          try { localStorage.removeItem('cms-oauth-pending'); } catch (e) {}
        }
      }
      window.addEventListener('storage', function(e) {
        if (e.key === 'cms-oauth-pending' && e.newValue) {
          try { localStorage.removeItem('cms-oauth-pending'); } catch (err) {}
          [0, 200, 500].forEach(function(delay) {
            setTimeout(function() { dispatchAuth(e.newValue); }, delay);
          });
        }
      });
      window.addEventListener('focus', function() {
        setTimeout(applyPendingAndClear, 100);
      });
      [300, 1000, 2000].forEach(function(delay) {
        setTimeout(applyPendingAndClear, delay);
      });
    })();
  </script>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js" defer></script>
</head>
<body>
  <main id="nc-root" role="main"></main>
</body>
</html>
