[build]
  command = "bash scripts/netlify-build.sh"
  publish = "public"

[build.environment]
  # Pin Babashka for reproducible builds; omit or set "latest" to use newest
  BABASHKA_VERSION = "1.12.214"

# Cache only public/assets/images so WebP/AVIF/responsive skip unchanged; HTML/CSS/JS stay fresh.
[[plugins]]
  package = "netlify-plugin-cache"
  [plugins.inputs]
  paths = ["public/assets/images"]

# Redirects are defined in src/_redirects (copied to public/ by build).
# Note: Netlify Forms handle form submissions before redirects.
# Forms with data-netlify="true" are processed before any redirects
